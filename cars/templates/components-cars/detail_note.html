{% extends 'car/car_data.html' %}
{% load static %}

{{ car_object.slug }}
{% block edit_notes %}
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="intro-y box lg:mt-5">
        <div class="p-5">
            <div class="flex flex-col-reverse xl:flex-row flex-col">
                <div class="flex-1 mt-6 xl:mt-0">
                    <div class="col-span-12 2xl:col-span-6">
                        {% for car_note in car_object.car_note.all %}
                        <div class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400">
                            <input name="title" type="text" class="form-control form-control-lg"
                                   value="{{ car_note.title }}"
                                   aria-label=".form-control-lg example">
                        </div>
                        <div class="items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400">
                                    <textarea name="text"
                                              class="ck-blurred editor ck ck-content ck-editor__editable ck-rounded-corners ck-editor__editable_inline"
                                              lang="ru" dir="ltr" role="textbox"
                                              contenteditable="true">
                                        {{ car_note.text }}
                                    </textarea>
                        </div>
                        <div class="mt-3">
                            <label class="form-label">Upload Image</label>
                            <div class="border-2 border-dashed dark:border-darkmode-400 rounded-md pt-4">
                                <div class="flex flex-wrap px-4">
                                    {% for note_photo in car_note.car_note_photo.all %}
                                    <div class="w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in">
                                        <img class="rounded-md" alt="Midone - HTML Admin Template"
                                             src="{{ note_photo.photo.url }}">
                                        <div title="Remove this image?"
                                             class="tooltip w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-danger right-0 top-0 -mr-2 -mt-2">
                                            <a href="{{ note_photo.get_absolute_url }}">
                                                <i data-lucide="x" class="w-4 h-4"></i>
                                            </a>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                <div class="px-4 pb-4 flex items-center cursor-pointer relative">
                                    <i data-lucide="image" class="w-4 h-4 mr-2"></i> <span class="text-primary mr-1">Upload a file</span>
                                    or drag and drop
                                    <input type="file" name="photo"
                                           class="w-full h-full top-0 left-0 absolute opacity-0" multiple>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="intro-y box mt-1">
        <div class="p-5">
            <div class="flex justify-end mt-3">
                <button type="submit" class="btn btn-success w-20 mr-auto">Сохранить</button>
                <button class="btn btn-primary">
                    <a href="{% url 'cars:list-note' car=car_object.slug %}" class="text flex items-center"
                       type="button">
                        <i data-lucide="" class="w-4 h-4 mr-auto"></i>
                        Отменить
                    </a>
                </button>
            </div>
        </div>
    </div>
</form>

{% endblock edit_notes %}